# GPIO工作模式

## 简介

- 4种输入模式
    - GPIO_Mode_IN_FLOATING 浮空输入
    - GPIO_Mode_IPU 上拉输入
    - GPIO_Mode_IPD 下拉输入
    - GPIO_Mode_AIN 模拟输入

- 4种输出模式
    - GPIO_Mode_Out_OD 开漏输出（带上拉或者下拉）)
    - GPIO_Mode_AF_OD 复用开漏输出（带上拉或者下拉）
    - GPIO_Mode_Out_PP 推挽输出（带上拉或者下拉）
    - GPIO_Mode_AF_PP 复用推挽输出（带上拉或者下拉）

- 4种最大输出速度（STM32）
    - 2MHZ  (低速)
    - 25MHZ  (中速)
    - 50MHZ  (快速)
    - 100MHZ  (高速)

浮空：顾名思义就是浮在空中，上面用绳子一拉就上去了，下面用绳子一拉就沉下去了。浮空输入状态下，IO的电平状态是不确定的，完全由外部输入决定，如果在该引脚悬空的情况下，读取该端口的电平是不确定的。 如果你外部上拉电阻，就是1；下拉电阻，就是0。浮空一般多用于按键，还有就是一些特殊功能。

开漏：等于输出口接了个NPN三极管，并且只接了e、b。而c极是开路的，你可以接一个电阻到3.3V，也可以接一个电阻到5V。这样，在输出1的时候，就可以是5V电压，也可以是3.3V电压了。但是不接电阻上拉的时候，这个输出高就不能实现了。

推挽：是有推有拉，任何时候IO口的电平都是确定的，不需要外接上拉或者下拉电阻。推挽电路是两个参数相同的三极管或MOSFET，以推挽方式存在于电路中，各负责正负半周的波形放大任务，电路工作时，两只对称的功率开关管每次只有一个导通，所以导通损耗小、效率高。输出既可以向负载灌电流，也可以从负载抽取电流。推拉式输出级既提高电路的负载能力，又提高开关速度。

## 用途

- 浮空输入（GPIO_Mode_IN_FLOATING）：在这种模式下，GPIO引脚既不上拉也不下拉，其电平状态完全由外部信号决定。如果引脚悬空，其电平是不确定的。这种模式适用于需要外部信号直接控制的场合，如按键输入。
- 上拉输入（GPIO_Mode_IPU）：上拉输入模式下，GPIO内部的上拉电阻被激活。当引脚悬空时，上拉电阻会将引脚电平拉高至VCC，从而确保引脚在无外部信号时处于高电平状态。这种模式适用于需要检测按键按下等场合，可以提高电路的稳定性。
- 下拉输入（GPIO_Mode_IPD）：与上拉输入相反，下拉输入模式下，GPIO内部的下拉电阻被激活。当引脚悬空时，下拉电阻会将引脚电平拉低至GND，从而确保引脚在无外部信号时处于低电平状态。这种模式同样适用于按键检测等场合。
- 模拟输入（GPIO_Mode_AIN）：在这种模式下，GPIO引脚用于输入模拟信号，不经过施密特触发器，直接接入ADC（模拟数字转换器）进行模拟信号的采集。

- 推挽输出（GPIO_Mode_Out_PP）：推挽输出模式允许GPIO引脚输出高电平和低电平。当输出高电平时，P-MOS管导通，N-MOS管截止；当输出低电平时，N-MOS管导通，P-MOS管截止。这种模式适用于需要输出较大电流的场合，如驱动LED等。
- 开漏输出（GPIO_Mode_Out_OD）：开漏输出模式下，GPIO引脚只能输出低电平或高阻态。如果需要输出高电平，必须外接上拉电阻。这种模式适用于需要线与逻辑或电平转换的场合，如I2C通信。
- 复用推挽输出（GPIO_Mode_AF_PP）：复用推挽输出模式与推挽输出类似，但输出信号来源于微控制器的外设模块，如定时器、USART等。这种模式适用于需要外设功能控制的场合。片内外设功能（I2C的SCL,SDA）。
- 复用开漏输出（GPIO_Mode_AF_OD）：复用开漏输出模式与开漏输出类似，但输出信号同样来源于微控制器的外设模块。这种模式适用于需要外设功能控制并且需要线与逻辑或电平转换的场合。片内外设功能（TX1,MOSI,MISO.SCK.SS）。

